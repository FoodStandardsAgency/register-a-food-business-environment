# specify the node base image with your desired version node:<version>
FROM node:8.9.4
ARG NPM_TOKEN
ARG http_proxy
ARG https_proxy
RUN echo $http_proxy

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app
COPY . /usr/src/app

RUN echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" > .npmrc && \
    yarn config set proxy $http_proxy && \
    yarn config set https-proxy $https_proxy && \
    yarn config set progress=false && \
    yarn config set strict-ssl false && \
    yarn config set registry https://registry.npmjs.org/ && \
    yarn install --maxsockets 10 --verbose

EXPOSE 3000