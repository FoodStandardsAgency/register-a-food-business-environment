# specify the node base image with your desired version node:<version>
FROM node:8.9.4
ARG NPM_TOKEN
ARG http_proxy
ARG https_proxy
RUN echo $http_proxy

RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app
COPY . /usr/src/app

RUN echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" > .npmrc && \
    npm config set proxy $http_proxy && \
    npm config set https-proxy $https_proxy && \
    npm config set strict-ssl false && \
    npm config set progress=false && \
    npm config set registry https://registry.npmjs.org/ && \
    npm install --production --verbose --max-sockets=40

EXPOSE 4001